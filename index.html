<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>V&auml;sen Brewing Company</title>
	<link rel="stylesheet" type="text/css" href="node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,500,700,800' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/style.css">    
	<script type="text/javascript" src="node_modules/jquery/dist/jquery.min.js"></script>
	<script type="text/javascript" src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="node_modules/instafeed.js/instafeed.min.js"></script>
    <script type="text/javascript" src="node_modules/readmore-js/readmore.min.js"></script>
    <script type="text/javascript" src="node_modules/validate.jquery.js/dist/validate.jquery.js.min.js"></script>
</head>
<body>
    <div class="container-fluid">

        <div class="row fixed" id="header">
            <div class="col-xs-2"></div>
            <div class="col-xs-8 text-center" id="logo">
                <img src="img/vasen_logo.png" alt="">
            </div>
            <div class="col-xs-2 text-right" id="social">
                <a href="http://www.facebook.com/vasenbrewing" target="_blank"><img src="img/facebook.png"></a>
                <a href="http://www.instagram.com/vasenbrewing" target="_blank"><img src="img/instagram.png"></a>
                <a href="http://www.twitter.com/vasenbrewing" target="_blank"><img src="img/twitter.png"></a>
            </div>
        </div>
        
        <div class="row static-bg" id="splash">
            <div id="seal-container">
                <div class="seal">
                    <img src="img/vasen_seal.png" alt="">
                </div>
            </div>
        </div>

    </div>
    
    <div class="container" id="content-container">
                
        <div class="row static-bg" id="story">
              <div class="col-lg-4">
                  <div class="section-text-container-left">
                      <div class="section-heading">OUR STORY</div>
                      <p class="section-text">The Swedish word “väsen” honors our Scandinavian heritage and translates as one’s inner essence or way of being. At Väsen Brewing Company, beer is about creating and appreciating something greater than yourself. Our beer is a medium through which we express ourselves and our appreciation for our surroundings. We do this in hopes of inspiring others to chase the things they love.</p>
                      <p class="section-text">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sit amet diam diam. Proin vitae velit fermentum, bibendum turpis non, ultricies eros. Aliquam porttitor ex ac ligula porttitor, et rhoncus diam rhoncus. Mauris et venenatis mauris, vel hendrerit tortor. Nulla viverra, erat a cursus pulvinar, nisl velit sagittis ante, et pretium massa erat at velit.</p>
                      <p class="section-text">Hylla Resan!</p>
                      <div class="decorative-divider"><img src="img/hr_hop_cone.png" class="img-responsive center-block"></div>
                  </div>
            </div>
            <div class="col-lg-8">
                <div class="section-main-container">
                    <img class="section-image img-responsive center-block" src="./img/team.jpg" alt="">
                </div>
            </div>
        </div>

        <div class="row static-bg" id="bios">
            <div class="col-lg-4 col-lg-push-8">
                <div class="section-text-container-right">
                    <div class="section-heading">OUR TEAM</div>
                    <div class="list-group" id="bio-list">
                        <a href="" class="list-group-item" id="joey">
                            <p class="bio-name">Joey Darragh</p>
                            <p class="bio-position"><small>Co-Founder/President</small></p>
                        </a>
                        <a href="" class="list-group-item" id="tony">
                            <p class="bio-name">Tony Giordano</p>
                            <p class="bio-position"><small>Co-Founder/Brewmaster</small></p>
                        </a>
                        <a href="" class="list-group-item" id="nathan">
                            <p class="bio-name">Nathan Winters</p>
                            <p class="bio-position"><small>Marketing & Environmental</small></p>
                        </a>
                        <a href="" class="list-group-item" id="jon">
                            <p class="bio-name">Jon Warner, PhD</p>
                            <p class="bio-position"><small>Head Brewery Scientist</small></p>
                        </a>
                    </div>
                    <div class="decorative-divider"><img src="img/hr_reindeer.png" class="img-responsive center-block"></div>
                </div>
            </div>
            <div class="col-lg-8 col-lg-pull-4">
                <div class="section-main-container">
                    <div class="bio-container bio-container-dynamic">
                        <div class="row">
                            <div class="col-sm-6 bio-portrait-container">
                                <div class="bio-portrait">
                                    Bio Portrait
                                </div>
                            </div>
                            <div class="col-sm-6 bio-text section-text">
                                <h2>
                                    <span class="bio-name">Name</span>
                                </h2>
                                <h5>
                                    <span class="bio-position">Position</span>
                                </h5>
                                <p class="bio-bio">Bio</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row static-bg" id="contact">
            <div class="col-xs-12 text-center" id="banner">
                <span class="contact-banner">Coming to RVA in Late 2016</span>
            </div>
            <div class="col-md-4">
                <div class="contact-heading">Instagram</div>
                <div id="instafeed-container">
                    <div class="row" id="instafeed"></div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="contact-heading">Get In Touch</div>
                <div id="form-container">
                    <form id="messageForm" method="post" action="mailer.php">
                        <div class="form-group">
                            <input type="text" class="form-control" id="name" name="name" placeholder="Name" required>
                            <input type="email" class="form-control" id="email" name="email" placeholder="Email" required>
                            <textarea class="form-control" id="message" name="message" placeholder="Message" rows="5" required></textarea>
                        </div>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </form>
                </div>
                <div id="form-messages"></div>
            </div>
            <div class="col-md-4">
                <div class="contact-heading">Where to Find Us</div>
                <div class="col-md-12 col-sm-6 col-xs-12" id="contact-map-container">
                    <div id="contact-map"></div>
                    <script>
                        function initMap() {
                            var myLatLng = {lat: 37.570138, lng: -77.472666};

                            var map = new google.maps.Map(document.getElementById('contact-map'), {
                                center: myLatLng,
                                zoom: 14,
                                scrollwheel: false,
                            });

                            var styles = [
                              {
                                featureType: "all",
                                stylers: [
                                  { saturation: -77 }
                                ]
                              }
                            ];

                            map.setOptions({styles: styles});

                            var image = 'img/map_marker.png';
                            var marker = new google.maps.Marker({
                                position: myLatLng,
                                map: map,
                                title: 'Väsen Brewing Company',
                                icon: image,
                            });

                            google.maps.event.addDomListener(window, "resize", function() {
                             var center = map.getCenter();
                             google.maps.event.trigger(map, "resize");
                             map.setCenter(center); 
                            });
                        };
                    </script>
                    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACtMtIFEWPMB_D74YexiPulTcPUUBNB7E&callback=initMap" async defer></script>
                </div>
            </div>
        </div>

        <div class="row" id="footer">
            <div class="col-xs-12 text-center" id="footer-social">
                <a href="http://www.facebook.com/vasenbrewing" target="_blank"><img src="img/facebook.png"></a>
                <a href="http://www.instagram.com/vasenbrewing" target="_blank"><img src="img/instagram.png"></a>
                <a href="http://www.twitter.com/vasenbrewing" target="_blank"><img src="img/twitter.png"></a>
            </div>
            <div class="col-xs-12 text-center" id="footer-address">
                <span class="footer-text">Väsen Brewing Company</span> / <span class="footer-text">3331 W Moore St</span> / <span class="footer-text">Richmond, VA 23230</span>
            </div>
        </div>
    </div>
    
    <script>
        var fade_header = function() {
            var st = $( window ).scrollTop();
            var wh = $( window ).height();

            if (st < wh/3) {
                $("#header").css({ 'opacity': 0, 
                                   'display': 'none' });
            } else if (st <= wh) {
                $("#header").css({ 'opacity': (st - wh/3)/(wh*2/3),
                                   'display': 'inherit' });
            } else {
                $("#header").css({ 'opacity': 1.0,
                                   'display': 'inherit' });
            };
        };
        
        var fluidize_container = function() {
            var windowWidth = $( window ).width();

            if (windowWidth > 1400) {
                $("#content-container").addClass('container');
                $("#content-container").removeClass('container-fluid');
            } else {
                $("#content-container").removeClass('container');
                $("#content-container").addClass('container-fluid');
            };
        };
        
        var adjust_bio_heights = function() {
            var windowWidth = $( window ).width();

            $(".bio-container").each(function(i, obj) {
                if (windowWidth > 768) {
                    ph = $(this).find(".bio-portrait").height();
                    $(this).find(".bio-text").outerHeight(ph);
                } else {
                    $(this).find(".bio-text").outerHeight("auto");
                }
            });
        };
        
        var apply_readmore = function() {
            if ($( window ).width() < 768) {
                $('.bio-bio').readmore({
                    collapsedHeight: 40
                });
            } else {
                $('.bio-bio').readmore('destroy');
            }
        }
        
        var bio_filler = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut sit amet diam diam. Proin vitae velit fermentum, bibendum turpis non, ultricies eros. Aliquam porttitor ex ac ligula porttitor, et rhoncus diam rhoncus. Mauris et venenatis mauris, vel hendrerit tortor. Nulla viverra, erat a cursus pulvinar, nisl velit sagittis ante, et pretium massa erat at velit. Nullam tincidunt odio sit amet viverra rutrum. Vestibulum porta, odio non cursus pretium, lectus ligula cursus dui, sit amet condimentum ante felis eget tortor. Fusce eget est tellus. Sed consectetur leo suscipit nulla congue, ut posuere tellus volutpat. Pellentesque ultrices lacus sit amet risus aliquam condimentum.";
        
        var bios = {
            'name': {
                'joey': 'Joey Darragh',
                'tony': 'Tony Giordano',
                'nathan': 'Nathan Winters',
                'jon': 'Jon Warner, PhD'
            },
            'position': {
                'joey': 'Co-Founder/President',
                'tony': 'Co-Founder/Brewmaster',
                'nathan': 'Marketing & Environmental',
                'jon': 'Head Brewery Scientist'
            },
            'bio': {
                'joey': bio_filler,
                'tony': bio_filler,
                'nathan': bio_filler,
                'jon': bio_filler
            }
        };
        
        var create_static_bio = function() {
            var bio_name = $(this).attr('id');
            var container_id = 'bio-container-' + bio_name;
            
            var new_container = $('.bio-container-dynamic').clone();
            new_container.attr('id', container_id)
                         .removeClass('bio-container-dynamic')
                         .addClass('bio-container-static');
            
            $('.bio-container-dynamic').before(new_container);
            
            var bio_pic = '<img class="img-responsive" src="img/team_' + bio_name + '.jpg">';

            $('#' + container_id + ' .bio-portrait').html(bio_pic);
            
            $('#' + container_id + ' .bio-name').html(bios['name'][bio_name]);
            $('#' + container_id + ' .bio-position').html(bios['position'][bio_name]);
            $('#' + container_id + ' .bio-bio').html(bios['bio'][bio_name]);
        }
        
        var update_dynamic_bio = function() {
            var bio_name = $(this).attr('id')
            var bio_pic = '<img class="img-responsive" src="img/team_' + bio_name + '.jpg">';

            $(document).find('.list-group-item').removeClass('active');
            $(this).addClass('active');
            
            $('.bio-container-dynamic .bio-portrait').html(bio_pic);
            
            $('.bio-container-dynamic .bio-name').html(bios['name'][bio_name]);
            $('.bio-container-dynamic .bio-position').html(bios['position'][bio_name]);
            $('.bio-container-dynamic .bio-bio').html(bios['bio'][bio_name]);
            
            return false;
        }
        
        $(function(){
            $(".list-group-item")
                .hover(update_dynamic_bio)
                .click(update_dynamic_bio);
        });
        
        $( document ).ready(function() {
            fade_header();
            fluidize_container();

            $(".list-group-item").each(create_static_bio);
            $("#joey").mouseenter();
                        
            $( window ).scroll(fade_header)
                       .resize(fade_header)
                       .resize(fluidize_container)
                       .resize(adjust_bio_heights)
                       .resize(apply_readmore);

            $(window).on("load", function() {
                adjust_bio_heights();
            });

            apply_readmore();
            
            var feed = new Instafeed({
                get: 'user',
                userId: 2533712132,
                accessToken: '2533712132.21213d0.fa6d5675be04485686d53eaaacaaa0af',
                sortBy: 'most-recent',
                template: '<div class="col-md-4 col-xs-2 insta-img"><a href="{{link}}" target="_blank"><img src="{{image}}" class="img-responsive" /></a></div>'
            });
            feed.run();
            
            var form = $( "#messageForm" );
            var formMessages = $( "#form-messages" );
            
            $( form ).validate();
            
            $( form ).submit(function(event) {
                event.preventDefault();
                  
                var formData = $( form ).serialize();
                
                $.ajax({
                    type: 'POST',
                    url: $( form ).attr('action'),
                    data: formData
                }).done(function(response) {
                    // Make sure that the formMessages div has the 'success' class.
                    $( formMessages ).removeClass('error');
                    $( formMessages ).addClass('success');

                    // Set the message text.
                    $(formMessages).text(response);

                    // Clear the form.
                    $( "#name" ).val('');
                    $( "#email" ).val('');
                    $( "#message" ).val('');
                }).fail(function(data) {
                    // Make sure that the formMessages div has the 'error' class.
                    $( formMessages ).removeClass('success');
                    $( formMessages ).addClass('error');

                    // Set the message text.
                    if (data.responseText !== '') {
                        $( formMessages ).text(data.responseText);
                    } else {
                        $( formMessages ).text('Oops! An error occured and your message could not be sent.');
                    }
                });
            });
        });
    </script>
</body>
</html>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-68249006-1', 'auto');
  ga('require', 'linkid');
  ga('send', 'pageview');

</script>
